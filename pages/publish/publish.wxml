<view class="page-container">
  <form bindsubmit="submitPublish">
    <!-- 标题 -->
    <view class="form-item">
      <view class="label">活动标题</view>
      <input class="input" name="title" value="{{title}}" placeholder="请输入活动标题" bindinput="handleInput" data-field="title" />
    </view>

    <!-- 封面图上传 -->
    <view class="form-item">
      <view class="label">活动封面图</view>
      <view class="image-uploader" bindtap="chooseImage">
        <image wx:if="{{imageUrl}}" src="{{imageUrl}}" mode="aspectFill" class="uploaded-image" />
        <view wx:else class="upload-placeholder">
          <text class="plus-icon">+</text>
          <text>上传封面</text>
        </view>
      </view>
    </view>

    <!-- 描述 -->
    <view class="form-item">
      <view class="label">活动描述</view>
      <textarea class="textarea" name="description" value="{{description}}" placeholder="请输入详细描述" bindinput="handleInput" data-field="description" maxlength="500"></textarea>
    </view>

    <!-- 奖品信息 -->
    <view class="section-title">奖品设置</view>
    <view class="form-item">
      <view class="label">奖品名称</view>
      <input class="input" name="prizeName" value="{{prizeName}}" placeholder="例如：iPhone 15" bindinput="handleInput" data-field="prizeName" />
    </view>
    <view class="form-row">
      <view class="form-item half">
        <view class="label">奖品价值</view>
        <input class="input" type="number" name="prizeValue" value="{{prizeValue}}" placeholder="0" bindinput="handleInput" data-field="prizeValue" />
      </view>
      <view class="form-item half">
        <view class="label">奖品数量</view>
        <input class="input" type="number" name="prizeQuantity" value="{{prizeQuantity}}" placeholder="例如: 10" bindinput="handleInput" data-field="prizeQuantity" />
      </view>
    </view>

    <!-- 规则设置 -->
    <view class="section-title">规则设置</view>
    <view class="form-row">
      <view class="form-item half">
        <view class="label">参与消耗积分</view>
        <input class="input" type="number" name="costPerEntry" value="{{costPerEntry}}" placeholder="例如: 10" bindinput="handleInput" data-field="costPerEntry" />
      </view>
      <view class="form-item half">
        <view class="label">最大参与人数</view>
        <input class="input" type="number" name="maxParticipants" value="{{maxParticipants}}" placeholder="例如: 100" bindinput="handleInput" data-field="maxParticipants" />
      </view>
    </view>
    <view class="form-row">
      <view class="form-item half">
        <view class="label">报名开始日期</view>
        <picker mode="date" value="{{startDate}}" bindchange="onStartDateChange">
          <view class="picker">{{startDate || '选择日期'}}</view>
        </picker>
      </view>
      <view class="form-item half">
        <view class="label">报名开始时间</view>
        <picker mode="time" value="{{startTime}}" bindchange="onStartTimeChange">
          <view class="picker">{{startTime || '选择时间'}}</view>
        </picker>
      </view>
    </view>
    
    <!-- 中奖概率由系统核算，前端不再输入 -->

    <view class="form-item">
      <view class="label">抽奖持续时间（分钟）</view>
      <input class="input" type="number" name="drawDuration" value="{{drawDuration}}" placeholder="例如: 60" bindinput="handleInput" data-field="drawDuration" />
    </view>

    <!-- 发布按钮 -->
    <button class="submit-btn" form-type="submit">立即发布活动</button>
  </form>
</view>
